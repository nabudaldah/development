<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cloud Service Changes :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://opencpn-manuals.github.io/development/AlternativeWorkflow/InstallConfigure/Builders/IntroCloudServiceChanges.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://opencpn-manuals.github.io/development"
      >
        OpenCPN Developer Manual
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.opencpn.org">OpenCPN.org</a>
            <a class="navbar-item"
               href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:opencpn_user_manual"
            >
               User Manual
               </a>
            <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
               Github Site
               </a>
            <a class="navbar-item" href="https://opencpn.org/flyspray/">
               Bugtracker
               </a>
            <a class="navbar-item"
                href="https://rasbats.github.io/opencpn-plugins-manual/">
                    Plugin Manual (pre-alpha)
               </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="AlternativeWorkflow" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Overview.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Metadata-Flow.html">Metadata Files</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Plugin-Adaptation.html">Adapting the Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../usage.html">Local Builds</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Local-Build.html">Build Dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../InstallConfigure.html">CI Services Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../GithubPreps.html">Github OpenCPN/plugins fork</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Cloudsmith.html">Cloudsmith</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="IntroBuilders.html">Builders</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Appveyor.html">Appveyor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="CircleCI.html">CircleCI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Drone.html">Drone.io</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Travis.html">Travis</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../BuilderEnv.html">Builder environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../GitHub.html">Final checks and testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Catalog-Github-Integration.html">Creating a catalog PR</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Useful-Stuff.html">Useful information</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Local-ci-build.html">Local CI builds (experimental)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Shipdriver Managed Workflow for the OpenCPN plugins</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../ocpn-dev-manual/5.3.1/index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ocpn-dev-manual/5.3.1/index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../opencpn-plugins/0.1/index.html">OpenCPN Plugins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../opencpn-plugins/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../ocpn-dev-manual/5.3.1/intro-AboutThisManual.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a></li>
    <li><a href="IntroCloudServiceChanges.html">Cloud Service Changes</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Rasbats/managed_plugins/edit/main/manual/modules/ROOT/pages/InstallConfigure/Builders/IntroCloudServiceChanges.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Cloud Service Changes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Now that the changes have been made to the plugin files and a backup
made the GitHub TideFinder repo can be updated with the file changes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_github"><a class="anchor" href="#_github"></a>GitHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shipdriver workflow simplifies the process of updating the plugin
metadata files in
<a href="https://github.com/opencpn/plugins">OpenCPN/plugins</a>.
At the same time as installers for the TideFinder plugin are made the
metadata file is copied to the auto branch of your fork of
OpenCPN/plugins.</p>
</div>
<div class="paragraph">
<p>After the build the changes made in your plugins clone/auto branch can
be pushed to the plugins clone/master branch ready for a pull request to
OpenCPN/plugins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appveyor"><a class="anchor" href="#_appveyor"></a>Appveyor</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Set the environment variables</strong></p>
</div>
<div class="sect2">
<h3 id="_experimenting_with_a_new_build"><a class="anchor" href="#_experimenting_with_a_new_build"></a>Experimenting with a new build</h3>
<div class="paragraph">
<p>So far none of the pushes to the GitHub TideFinder repo have been
tagged. We will continue like this as we test the build.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># ——– Options ———-

set(OCPN_TEST_REPO opencpn/tidefinder-alpha CACHE STRING // Default repository for untagged builds)

set(OCPN_BETA_REPO opencpn/tidefinder-beta  CACHE STRING // Default repository for tagged builds matching `beta' )

set(OCPN_RELEASE_REPO opencpn/tidefinder-prod CACHE STRING // Default repository for tagged builds not matching beta )</pre>
</div>
</div>
<div class="paragraph">
<p>Make a small non-important change to one of the files and push to the
GitHub TideFinder repo.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_now_check_the_cloud_services_for_errors"><a class="anchor" href="#_now_check_the_cloud_services_for_errors"></a>Now check the Cloud services for errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If any build fails the log for the builder is useful for fixing errors
in the code and/or scripts.</p>
</div>
<div class="paragraph">
<p><strong>Appveyor</strong></p>
</div>
<div class="paragraph">
<p>The appveyor log shows that there is an error in CMakeLists.txt.</p>
</div>
<div class="paragraph">
<p>add_library(${CMAKE_PROJECT_NAME} SHARED ${SRC})</p>
</div>
<div class="paragraph">
<p>should read:</p>
</div>
<div class="paragraph">
<p>add_library(${CMAKE_PROJECT_NAME} SHARED ${SRC_TIDEFINDER})</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/build.errors/1.appveyor.error.jpg" alt="1.appveyor.error.jpg"></span></p>
</div>
<div class="paragraph">
<p><strong>Travis</strong> The scripts copied from ShipDriver do not have execute
permission. As a result permission to run is denied.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/build.errors/2.travis.error.jpg" alt="2.travis.error.jpg"></span></p>
</div>
<div class="paragraph">
<p>This results from copying script files from ShipDriver to TideFinder on
Windows. Permissions are not copied. To set these again the Git command
can be used for the scripts in ci/.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>git update-index –chmod=+x foo.sh</p>
</li>
<li>
<p>git commit -m ``Adding execute permissions to foo.sh''</p>
</li>
<li>
<p>git push</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>CircleCI</strong> The scripts copied from ShipDriver do not have execute
permission. As a result permission to run is denied.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/build.errors/3.circleci.error.jpg" alt="3.circleci.error.jpg"></span></p>
</div>
<div class="paragraph">
<p>Again this is due to copying files on Windows. Once set as above the
build will work.</p>
</div>
<div class="paragraph">
<p><a href="#Alternative-Workflow.adoc" class="page unresolved">The Shipdriver Workflow</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
