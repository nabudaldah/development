<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Builder environment variables :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://opencpn-manuals.github.io/development/AlternativeWorkflow/InstallConfigure/BuilderEnv.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://opencpn-manuals.github.io/development"
      >
        OpenCPN Developer Manual
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.opencpn.org">OpenCPN.org</a>
            <a class="navbar-item"
               href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:opencpn_user_manual"
            >
               User Manual
               </a>
            <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
               Github Site
               </a>
            <a class="navbar-item" href="https://opencpn.org/flyspray/">
               Bugtracker
               </a>
            <a class="navbar-item"
                href="https://rasbats.github.io/opencpn-plugins-manual/">
                    Plugin Manual (pre-alpha)
               </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="AlternativeWorkflow" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Overview.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Metadata-Flow.html">Metadata Files</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Plugin-Adaptation.html">Adapting the Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../usage.html">Local Builds</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Local-Build.html">Build Dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../InstallConfigure.html">CI Services Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="GithubPreps.html">Github OpenCPN/plugins fork</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Cloudsmith.html">Cloudsmith</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Builders/IntroBuilders.html">Builders</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Builders/Appveyor.html">Appveyor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Builders/CircleCI.html">CircleCI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Builders/Drone.html">Drone.io</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Builders/Travis.html">Travis</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="BuilderEnv.html">Builder environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="GitHub.html">Final checks and testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Catalog-Github-Integration.html">Creating a catalog PR</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Useful-Stuff.html">Useful information</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Local-ci-build.html">Local CI builds (experimental)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Shipdriver Managed Workflow for the OpenCPN plugins</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../ocpn-dev-manual/5.3.1/index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ocpn-dev-manual/5.3.1/index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../opencpn-plugins/0.1/index.html">OpenCPN Plugins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../opencpn-plugins/0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../ocpn-dev-manual/5.3.1/intro-AboutThisManual.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a></li>
    <li><a href="../InstallConfigure.html">CI Services Configuration</a></li>
    <li><a href="Builders/IntroBuilders.html">Builders</a></li>
    <li><a href="BuilderEnv.html">Builder environment</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Rasbats/managed_plugins/edit/main/manual/modules/ROOT/pages/InstallConfigure/BuilderEnv.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Builder environment variables</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>All builders like CircleCI, Appveyor, Travis, etc. needs some
environment variables. The procedures for setting them varies
between the builders, see
<a href="Builders/IntroCloudServiceChanges.html" class="page">Cloud service changes</a>
However, the contents of each variable is the same on all builders.
This page is a reference for these variables</p>
</div>
<div class="paragraph">
<p>Most users need to define</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CLOUDSMITH_API_KEY</p>
</li>
<li>
<p>GIT_REPO</p>
</li>
<li>
<p>GIT_KEY_PASSWORD</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloudsmith_api_key"><a class="anchor" href="#_cloudsmith_api_key"></a>CLOUDSMITH_API_KEY</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a secret available in the Cloudsmith web UI in the account
drop down top-right under the API Settings menu:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/11cloudsmith.jpg" alt="11cloudsmith">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git_repo"><a class="anchor" href="#_git_repo"></a>GIT_REPO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This a public configuration item related to the metadata
push function to the opencpn/plugins catalog described in the
<a href="Catalog-Github-Integration.html" class="page">metadata push</a> page.</p>
</div>
<div class="paragraph">
<p>Metadata push requires user to have forked the github repository at
<a href="https://github.com/opencpn/plugins" class="bare">https://github.com/opencpn/plugins</a>. GIT_REPO should be set to the
SSH-based url to this fork, something like <em>git@github.com:leamas/plugins.git</em></p>
</div>
<div class="paragraph">
<p>The value can be obtained on the command line in the fork using</p>
</div>
<div class="literalblock">
<div class="content">
<pre>git config --get remote.origin.url</pre>
</div>
</div>
<div class="paragraph">
<p>or using the GUI:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/github/1.plugins.jpg" alt="1.plugins">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git_key_password"><a class="anchor" href="#_git_key_password"></a>GIT_KEY_PASSWORD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A secret also related to the metadata push function described in the
<a href="Catalog-Github-Integration.html" class="page">metadata push</a> page. This page
describes how to run the script <em>new-credentials</em>. GIT_KEY_PASSWORD
should be the password entered to this script.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_cloudsmith_repositories"><a class="anchor" href="#_custom_cloudsmith_repositories"></a>Custom Cloudsmith Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A plugin build usually uploads to cloudsmith repositories. The
repositories used depends on the git tag attached to the build, if any.
The repositories used by default are hardcoded in Plugin.cmake in snippets
like</p>
</div>
<div class="literalblock">
<div class="content">
<pre>set(OCPN_TEST_REPO "opencpn/shipdriver-alpha"
    CACHE STRING "Default repository for untagged builds"
)
set(OCPN_BETA_REPO "opencpn/shipdriver-beta"
    CACHE STRING "Default repository for tagged builds matching 'beta'"
)
set(OCPN_RELEASE_REPO "opencpn/shipdriver-prod"
    CACHE STRING "Default repository for tagged builds not matching 'beta'"
)</pre>
</div>
</div>
<div class="paragraph">
<p>When forking a plugin, the developer hasn&#8217;t permissions to upload to
these hardcoded repositories which belongs to the original owner. To fix
this, other repos could be defined using the environment variables
CLOUDSMITH_UNSTABLE_REPO, CLOUDSMITH_BETA_REPO and
CLOUDSMITH_STABLE_REPO. The values are complete repo specifications
like <em>alec-leamas/opencpn-plugins-unstable</em>.</p>
</div>
<div class="paragraph">
<p><a href="../Overview.html" class="page">&#8592; ShipDriver template overview</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
